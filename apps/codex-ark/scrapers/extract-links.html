<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Extractor Â· CODEX-ARK</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg: #0a0a0f;
            --bg-card: #12121a;
            --orange: #ff6611;
            --text: #e8e8f0;
            --text-dim: #888899;
            --border: #2a2a3a;
        }
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { color: var(--orange); text-align: center; margin-bottom: 5px; }
        .subtitle { text-align: center; color: var(--text-dim); font-size: 12px; margin-bottom: 20px; }
        textarea {
            width: 100%;
            height: 150px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text);
            font-family: inherit;
            font-size: 12px;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        textarea:focus { outline: none; border-color: var(--orange); }
        .options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 15px;
            padding: 15px;
            background: var(--bg-card);
            border-radius: 8px;
        }
        .options label {
            font-size: 12px;
            color: var(--text-dim);
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
        }
        .options input { accent-color: var(--orange); }
        .controls { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .btn {
            background: var(--bg-card);
            border: 1px solid var(--orange);
            color: var(--orange);
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
            transition: all 0.2s;
        }
        .btn:hover { background: var(--orange); color: var(--bg); }
        .results {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }
        .result-item {
            padding: 8px 10px;
            border-bottom: 1px solid var(--border);
            display: flex;
            gap: 10px;
            align-items: center;
            font-size: 12px;
        }
        .result-item:last-child { border-bottom: none; }
        .result-item:hover { background: rgba(255,102,17,0.05); }
        .result-text { flex: 1; color: var(--text-dim); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .result-url { flex: 2; color: var(--orange); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .result-url a { color: inherit; text-decoration: none; }
        .result-url a:hover { text-decoration: underline; }
        .result-type { font-size: 10px; padding: 2px 6px; border-radius: 3px; background: var(--bg); color: var(--text-dim); }
        .stats { text-align: center; color: var(--text-dim); font-size: 12px; margin: 15px 0; padding: 10px; background: var(--bg-card); border-radius: 6px; }
        .empty { text-align: center; color: var(--text-dim); padding: 40px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ”— LINK EXTRACTOR</h1>
        <div class="subtitle">Harvest URLs from HTML Â· CODEX-ARK</div>
        <textarea id="input" placeholder="Paste HTML source here... (Ctrl+U on most pages to view source)"></textarea>
        <div class="options">
            <label><input type="checkbox" id="includeInternal" checked> Internal links</label>
            <label><input type="checkbox" id="includeExternal" checked> External links</label>
            <label><input type="checkbox" id="includeImages" checked> Image sources</label>
            <label><input type="checkbox" id="includeScripts"> Script sources</label>
            <label><input type="checkbox" id="removeDuplicates" checked> Remove duplicates</label>
            <label><input type="checkbox" id="sortAlpha"> Sort A-Z</label>
        </div>
        <div class="controls">
            <button class="btn" onclick="extractLinks()">âš¡ EXTRACT</button>
            <button class="btn" onclick="copyAll()">ðŸ“‹ Copy URLs</button>
            <button class="btn" onclick="copyMarkdown()">ðŸ“‹ Markdown</button>
            <button class="btn" onclick="downloadCSV()">ðŸ’¾ CSV</button>
            <button class="btn" onclick="clearAll()">ðŸ—‘ Clear</button>
        </div>
        <div class="stats" id="stats">Paste HTML and click Extract</div>
        <div class="results" id="results"><div class="empty">Results will appear here</div></div>
    </div>
    <script>
        let links = [];
        function extractLinks() {
            const input = document.getElementById('input').value;
            if (!input.trim()) return;
            const opt = {
                internal: document.getElementById('includeInternal').checked,
                external: document.getElementById('includeExternal').checked,
                images: document.getElementById('includeImages').checked,
                scripts: document.getElementById('includeScripts').checked,
                dedupe: document.getElementById('removeDuplicates').checked,
                sort: document.getElementById('sortAlpha').checked
            };
            const doc = new DOMParser().parseFromString(input, 'text/html');
            links = [];
            if (opt.internal || opt.external) {
                doc.querySelectorAll('a[href]').forEach(a => {
                    const href = a.getAttribute('href');
                    const text = a.textContent.trim().substring(0,80) || '[link]';
                    if (href.startsWith('#') || href.startsWith('javascript:') || href.startsWith('mailto:')) return;
                    const isExt = href.startsWith('http') || href.startsWith('//');
                    if ((isExt && opt.external) || (!isExt && opt.internal)) links.push({type:'link',url:href,text});
                });
            }
            if (opt.images) {
                doc.querySelectorAll('img[src]').forEach(img => {
                    const src = img.getAttribute('src');
                    if (src && !src.startsWith('data:')) links.push({type:'img',url:src,text:img.alt||'[image]'});
                });
            }
            if (opt.scripts) {
                doc.querySelectorAll('script[src]').forEach(s => {
                    if (s.src) links.push({type:'js',url:s.getAttribute('src'),text:'[script]'});
                });
            }
            if (opt.dedupe) {
                const seen = new Set();
                links = links.filter(l => { if(seen.has(l.url)) return false; seen.add(l.url); return true; });
            }
            if (opt.sort) links.sort((a,b) => a.url.localeCompare(b.url));
            render();
        }
        function render() {
            const r = document.getElementById('results');
            const s = document.getElementById('stats');
            if (!links.length) { r.innerHTML='<div class="empty">No links found</div>'; s.textContent='0 links'; return; }
            s.textContent = `Found ${links.length} links`;
            r.innerHTML = links.map(l => `<div class="result-item"><span class="result-type">${l.type}</span><span class="result-text">${esc(l.text)}</span><span class="result-url"><a href="${esc(l.url)}" target="_blank">${esc(l.url)}</a></span></div>`).join('');
        }
        function esc(t) { const d=document.createElement('div'); d.textContent=t; return d.innerHTML; }
        function copyAll() { navigator.clipboard.writeText(links.map(l=>l.url).join('\n')); }
        function copyMarkdown() { navigator.clipboard.writeText(links.map(l=>`- [${l.text}](${l.url})`).join('\n')); }
        function downloadCSV() {
            const csv = 'Type,Text,URL\n' + links.map(l=>`"${l.type}","${l.text.replace(/"/g,'""')}","${l.url}"`).join('\n');
            const a = document.createElement('a'); a.href=URL.createObjectURL(new Blob([csv])); a.download='links.csv'; a.click();
        }
        function clearAll() { document.getElementById('input').value=''; links=[]; render(); }
        document.getElementById('input').addEventListener('paste', ()=>setTimeout(extractLinks,100));
    </script>
</body>
</html>
